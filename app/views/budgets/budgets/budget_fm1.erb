<h1>Presupuesto</h1>

<%= render :partial => 'request' %>

<%= form_for(@budgets_budget) do |f| %>

  <% if @budgets_budget.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@budgets_budget.errors.count, "error") %> prohibited this budgets_budget from being saved:</h2>

      <ul>
      <% @budgets_budget.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

 <%=  f.text_field :request_id, :type => "hidden" %>

<table width="950" class="table_content_c4">
  <tr>
    <td width="80" align="right" valign="top">
      <b> Descripción Técnica </b>
    </td>
    <td align="left" colspan="3">
      <%= f.text_area :tech_description,  :size => '120x4'  %>
    </td>
  </tr>
  <tr>
    <td width="80" align="right" valign="top">
      <b> Descripción de Trabajos </b>
    </td>
    <td align="left"  colspan="3">
      <%= f.text_area :description,  :size => '120x4'  %>
    </td>
  </tr>
  <tr>
    <td width="80" align="right">
       <b> Tipo de Soporte:</b>
    </td>
    <td align="left" colspan="3">
       <%= select :budgets_budget , :support_type_id, Catalogs::SupportType.find(:all).collect{|p| [p.name, p.id]}%>
    </td>
  </tr>

</table>

<div class="actions">
    <%= f.submit 'Guardar Presupuesto'%>
</div>

<script type="text/javascript">
       function toggleCheckBox() {

                 this.document.getElementById('unit_cost').value= 1000   ; //this.document.getElementById('descript').value;

	}
</script>


<a href="#" id="combo" onchange="toggleCheckBox()">
  <%= select :budgets_budget , :description_supply, Catalogs::Supply.find(:all,  :conditions => "type_supply = 1").collect{|p| [p.description, p.description]}%>
</a>



<% form_for Budgets::BudgetSupply.new, :remote => true do |f2| %>
   <table>
     <tr>
       <td>
        <%= f2.label :description, "Material:" %>
        <%= select :budgets_budget_supply , :description, Catalogs::Supply.find(:all,  :conditions => "type_supply = 1").collect{|p| [p.description, p.description]}%>
       </td>
       <td>
        <%= f2.label :quantity, "Cantidad:" %>
        <%= f2.text_field :quantity, :size => 9 %>
       </td>
       <td>
        <%= f2.label :unit_cost, "Importe:" %>
        <%= f2.text_field :unit_cost, :size => 9 %>
       </td>
       <div class="actions">
          <td  ><%= f2.submit 'Agregar material', :name => 'material' %></td>
       </div>

     </tr>
     <tr>
     </tr>
   </table>
<% end %>

<div id="supplies">
  <%= render :partial => 'supplies', :locals => { :list => true }%>
</div>




<% end %>






